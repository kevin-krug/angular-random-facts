<div class="fact-text-wrapper">
    <p>
        @if (factState$ | async; as factState) {
            @switch (factState.state) {
                @case ("loading") {
                    Loading...
                }
                @case ("error") {
                    Error: {{ factState.error.message }}
                }
                @case ("loaded") {
                    {{ factState.data.text }}
                }
            }
        }
    </p>
</div>

<div class="fact-ctas">
    <button (click)="refetchFact()">Fetch New Fact</button>
    @if (factWithFavorites$ | async; as factWithFavorites) {
        @if (factWithFavorites.factData) {
            <button
            [disabled]="factWithFavorites.factState !== 'loaded' || factWithFavorites.favoriteIdAlreadyExists"
            (click)="saveFact(factWithFavorites.factData)">
            Add Fact to Favorites
            </button>
        }
    }
</div>